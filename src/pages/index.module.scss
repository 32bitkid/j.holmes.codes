@import '../css/variables';

$wmod: 1.5;
$glass: repeating-linear-gradient(
                -45deg,
                rgba(255, 255, 255, 0) 8vw * $wmod,
                rgba(255, 255, 255, 0.075) 10vw * $wmod,
                rgba(255, 255, 255, 0.075) 14vw * $wmod,
                rgba(255, 255, 255, 0.15) 14vw * $wmod,
                rgba(255, 255, 255, 0.15) 15vw * $wmod,
                rgba(255, 255, 255, 0.075) 17vw * $wmod,
                rgba(255, 255, 255, 0) 30vw * $wmod,
                rgba(black, 0.025),
                rgba(255, 255, 255, 0) 40vw * $wmod,
                rgba(255, 255, 255, 0.10) 40vw * $wmod,
                rgba(255, 255, 255, 0) 55vw * $wmod,
                rgba(255, 255, 255, 0.075) 60vw * $wmod,
                rgba(255, 255, 255, 0.075) 66vw * $wmod,
                rgba(255, 255, 255, 0.15) 66vw * $wmod,
                rgba(255, 255, 255, 0.075) 70vw * $wmod,
                rgba(255, 255, 255, 0) 100vw * $wmod);

// About Me

.aboutMe {
  @extend %primary;
  padding-top: $line-height;
  padding-bottom: $line-height;

  &__header {
    h1 {
      margin-top: $line-height * 7;
      @extend %-f--epic;
      font-weight: bold;
      margin-bottom: 0;
    }
    h2 {
      @extend %-f--huge;
      font-family: 'Equity Caps B', serif;
      font-feature-settings: "c2sc", "smcp";
      $gap: 0.4rem;
      margin-top: $gap * -1;
      margin-bottom: $line-height * 2 + $gap;
      text-indent: 3ch;
    }
  }
  p {
    @media screen and (min-width: $article-width) {
      max-width: $content-width * 2 / 3;
    }
  }
}

// Blog

$shade: radial-gradient(
    ellipse 70% 70% at center,
    rgba(white, 0) 75%,
    rgba(white, 0.125) 100%
);

$timing-quick: 333ms;
$timing-slow: 2s;
$post-indent: 0.7492rem * 1.5;

.blog {
  padding-top: $line-height;
  padding-bottom: $line-height;

  // enhanced cards
  @media screen and (min-width: $content-width) {
    background-position: -75vw 0;
    background-attachment: fixed;
    background-size: 200vw auto;

    background-image: $glass;
    background-color: #888;
    box-shadow: inset 0 1.25rem 0.5rem -1rem rgba(black, 0.5);
    border-bottom: 1px solid gray;
  }

  $aspect: 9/16;

  &__header, &__list, &__more {
    @extend %primary;
  }

  &__header {
    display: none;
    @media screen and (min-width: $content-width) {
      display: block;
    }
  }

  &__list {
    @media screen and (min-width: $content-width) {
      display: grid;
    }

    @media screen and (min-width: $content-width) and (max-width: $article-width) {
      grid-template-columns: repeat(2, 1fr);
      grid-auto-rows: minmax($content-width * $aspect, auto);
      grid-gap: 1.45rem 1.45rem;
    }

    @media screen and (min-width: $article-width) {
      grid-template-columns: repeat(3, 1fr);
      grid-auto-rows: minmax($article-width * (2/3) * $aspect, auto);
      grid-gap: 1rem 1rem;
    }
  }

  &__post {
    display: list-item;
    border-top: 1px dotted #ddd;

    &:last-child {
      border-bottom: 1px dotted #ddd;
    }

    color: inherit;
    &:hover { text-decoration: none;}

    @media screen and (min-width: $content-width) {
      border-top: 0;
      border-bottom: 0;
      margin-bottom: 0;
      padding: 1.5rem;
      border-radius: 4px;
      background-color: #aaa;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      justify-content: flex-end;

      background-position: 0 0, 0 0;
      background-attachment: fixed, scroll;
      background-size: 200vw auto, cover;
      background-image: $glass, $shade;
      box-shadow: 0 0 0 0 rgba(white, 0);

      transition:
        background-color $timing-quick linear,
        transform $timing-slow / 2 ease-in-out,
        box-shadow $timing-slow ease-in-out,
        background-position $timing-slow cubic-bezier(0.000, 1.000, 0.000, 1);

      &:hover {
        color: white;
        background-color: #070f17;
        background-position: -75.25vw 0, 0 0;
        transform: scale(1.025);
        box-shadow: 0 0 2rem 0.125rem rgba(white, 0.5);
      }
    }

    @media screen and (min-width: $content-width) and (max-width: $article-width)  {
      &:nth-child(1), &:nth-child(4), &:nth-child(7) {
        grid-column: span 2;
      }
    }

    @media screen and (min-width: $article-width) {
      &:nth-child(1), &:nth-child(7) {
        grid-column: span 2;
      }
    }
  }

  &__title {
    color: $color--primary;
    margin-top: $line-height;
    margin-bottom: 0;
    @include -f--x-large;

    @media screen and (min-width: $content-width) {
      color: inherit;
      text-align: right;
      text-shadow:
              0 0 0 rgba(black, 0),
              0 0 0 rgba(white, 0);

      transition:
              text-shadow $timing-slow linear;
    }
  }

  &__post:hover > &__title {
    text-decoration: underline;

    @media screen and (min-width: $content-width) {
      color: inherit;
      text-decoration: none;
      text-shadow:
              0 0 0.5em rgba(black, 1),
              0 0.125em 2.25em rgba(white, 1);
    }
  }

  &__when {
    @extend %-f--small;
    $pull: 0rem;
    margin-top: $pull * -1;
    margin-bottom: $pull;

    padding-left:  $post-indent;
    padding-right: $post-indent;

    @media screen and (min-width: $content-width) {
      text-align: right;
      text-indent: 0;
    }
  }

  &__excerpt {
    margin-top: $line-height;
    text-indent: $post-indent;

    overflow-wrap: break-word;
    word-wrap: break-word;
    hyphens: auto;

    @media screen and (min-width: $content-width) {
      @include -f--small;
      line-height: 1.45;
      opacity: 0;
      transition: opacity $timing-slow linear;
      flex-basis: $content-width / 8;
      margin-top: 0;
      margin-left: auto;
      text-align: justify;
      text-align-last: right;
      max-width: $content-width / 2;
    }
  }

  &__post:hover > &__excerpt {
    @media screen and (min-width: $content-width) {
      opacity: 0.333;
    }
  }

  &__ttr {
    padding-left:  $post-indent;
    padding-right: $post-indent;

    @extend %-f--small;
    font-style: italic;
    line-height: $line-height * 2;
    text-align: right;
    &::after { content: ' \00bb'; }

    @media screen and (min-width: $content-width) {
      padding: 0;
      line-height: 1;
      opacity: 0.25;
      margin-top: $line-height;
    }
  }

  &__more > {
    :link, :visited {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
      &::after { content: 'â€¦'; }

      @media screen and (min-width: $content-width) {
        @include -f--large();
        display: block;
        margin-top: $line-height;
        color: white;
        text-align: right;
        padding: 0;
        &::after { content: ' \2192'; }
      }
    }
  }
}

// Projects

.projects {
  @extend %primary;
  padding-top: $line-height;
  padding-bottom: $line-height;

  &__header {
    display: none;
    @media screen and (min-width: $content-width) {
      display: block;
    }
  }

  ul {
    @media screen and (min-width: $article-width) {
      columns: 2;
      column-gap: $line-height * 2;
      column-fill: balance;
    }
  }
}

.project {
  margin-bottom: $line-height * 2;

  dt {
    @extend %-f--x-large;
  }

  &__meta {
    @extend %-f--small;
    font-feature-settings: 'onum';
    font-variant-numeric: oldstyle-nums;
    text-indent: $post-indent;
  }

  dd:not(&__meta) {
    padding: 0 $post-indent;
    margin: ($line-height * 1/ 4) 0 ($line-height * 3 / 4);
  }
}
