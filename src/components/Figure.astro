---
const { caption, centered = false, table = false, code = false } = Astro.props;
const figure = table !== true && code !== true;
---
<style>
  :global(article) {
    counter-reset: figure table code;
  }

  figure.figure > figcaption:not(:empty) {
    counter-increment: figure;
  }

  figure.figure > figcaption:not(:empty):before {
    content: "Figure " counter(figure) ": ";
  }

  figure.table > figcaption:not(:empty) {
    counter-increment: table;
  }

  figure.table > figcaption:not(:empty):before {
    content: "Table " counter(table) ": ";
  }

  figure.code > figcaption:not(:empty) {
    counter-increment: code;
  }

  figure.code > figcaption:not(:empty):before {
    content: "Example " counter(code) ": ";
  }

  figcaption {
    font-variant-numeric: oldstyle-nums;
    text-align: right;
    font-size: 0.7492rem;
    line-height: calc(var(--line-height) * 1);
  }

  figure.centered {
    text-align: center;
  }
</style>

<figure class:list={{centered, figure, table, code }}>
  <slot />
  <figcaption>
    <slot name="caption">{caption}</slot>
  </figcaption>
</figure>