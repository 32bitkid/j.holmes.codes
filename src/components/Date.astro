---
import { format } from 'date-fns';
import { parseDate, toDay } from './parseDate';
const {
  class: className,
  date: inputDate,
  day = true,
  month = true,
  human = false,
  tabular = false,
} = Astro.props;

const formatStr =
  inputDate.length === 4 || !month
    ? 'yyyy'
    : inputDate.length === 7 || !day
      ? 'MMM yyyy'
      : human
        ? 'MMMM do, yyyy'
        : 'yyyy-MM-dd';

const date = toDay(parseDate(inputDate));
---

<style>
  .tabular {
    font-variant-numeric: tabular-nums oldstyle-nums;
  }
</style>
<time
  class:list={[className, tabular && 'tabular']}
  datetime={date.toISOString()}>{format(date, formatStr)}</time
>
